{% extends 'main.html' %}

{% block content %}

<div class="container">
    <div class="row mt-3">
        <!-- Content -->
        <div class="col-md-12">
            <div class="content-box bg-white p-4">
      <h3 class="pb-3"> My Profile </h3>

      <h6 class="pb-3">
      <strong> Username: </strong> {{user.username}}
      </h6>

       <form id="form" action="/accounts/profile/edit/{{user.id}}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="container">
            <h6 class="text-center">Profile Image Upload 
            </h6>
            <div class="avatar-upload">
                <div class="avatar-edit">
                    <input name="image" type='file' id="imageUpload" accept=".png, .jpg, .jpeg" />
                    <label for="imageUpload"></label>
                </div>
                <div class="avatar-preview">
                    <div id="imagePreview" style="background-image: url('{{userInfo.image}}');">
                    </div>
                </div>
            </div>
        </div>

         <div class="form-group input-group">
           <div class="input-group-prepend">
               <span class="input-group-text my-prof-input"> <i class="fa fa-user"></i>  &nbsp;Full Name </span>
            </div>
            <input name="name" class="form-control" value="{{user.first_name}}" placeholder="Enter Full name" type="text" required>
         </div> <!-- form-group// -->



         <div class="form-group input-group">
           <div class="input-group-prepend">
             <span class="input-group-text my-prof-input"> <i class="fa fa-envelope"></i> &nbsp;Email Address</span>
          </div>
             <input name="email" value="{{user.email}}" class="form-control" placeholder="Email" type="email" required>
         </div> <!-- form-group// -->

         <div class="form-group input-group">
            <div class="input-group-prepend">
              <span class="input-group-text my-prof-input"> <i class="fa fa-envelope"></i> &nbsp;Website Link<Link></Link></span>
           </div>
              <input name="websiteLink" value="{{userInfo.websiteLink}}" class="form-control" placeholder="Website Link" type="text">
          </div> <!-- form-group// -->


         <div class="form-group input-group">
           <div class="input-group-prepend">
             <span class="input-group-text my-prof-input"> <i class="fa fa-lock"></i> &nbsp;Password</span>
         </div>
             <input name="pass1" class="form-control" placeholder="(Password Unchanged)" type="password">
         </div> <!-- form-group// -->


         <div class="form-group input-group">
           <div class="input-group-prepend">
             <span class="input-group-text my-prof-input"> <i class="fa fa-lock"></i>  &nbsp;Confirm Password</span>
         </div>
             <input name="pass2" class="form-control" placeholder="(Password Unchanged)" type="password">
         </div> <!-- form-group// -->


         <div class="form-group input-group">
            <div class="input-group-prepend">
              <span class="input-group-text my-prof-input"> <i class="fa fa-lock"></i>  &nbsp;Description</span>
          </div>
                <textarea name="description" class="form-control" rows="8">{{userInfo.description}}</textarea>
          </div> 


         <div class="form-group">
           <button id="save" name="save-profile" type="submit" class="btn btn-primary">Save Changes</button>

         </div>

         <hr>

         <h4 class="pb-3"> Delete My Account </h4>

         <a href="/accounts/delete/{{user.id}}" name="delete" type="submit" class="btn btn-danger text-white" onclick="return confirm('Do you want to  Permanently delete this Account? Y/N \n Note: This cannot be undone.')">Delete Account</a>


      </form>



            </div>
        </div>


    </div>

</div>


<script>
    function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
            $('#imagePreview').css('background-image', 'url('+e.target.result +')');
            $('#imagePreview').hide();
            $('#imagePreview').fadeIn(650);
        }
        reader.readAsDataURL(input.files[0]);
    }
    }
    $("#imageUpload").change(function() {
        readURL(this);
    });
</script>

{% endblock content %}